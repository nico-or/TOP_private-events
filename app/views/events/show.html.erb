<div class="row">
  <div class="col mb-3">
    <div class="mb-3">
      <div class="h1">
        <%=@event.name %>
      </div>
      <div class="mb-2">
        <%= @event.description %>
      </div>
      <div class="mb-2">
        <div class="row gx-2">
          <div class="col-3 fw-bold text-end">Location:</div>
          <div class="col"><%= @event.location %></div>
        </div>
        <div class="row gx-2">
          <div class="col-3 fw-bold text-end">Date:</div>
          <div class="col"><%= @event.date %></div>
        </div>
        <div class="row gx-2">
          <div class="col-3 fw-bold text-end">Creator:</div>
          <div class="col"><%= link_to @event.host.username, user_path(@event.host) %></div>
        </div>
      </div>
    </div>
    <div>
      <% if current_user %>
        <div class="hstack gap-2">
          <% if @event.host.eql? current_user %>
            <%= link_to "Edit event", edit_event_path, class: "btn btn-primary" %>
            <%= button_to "Delete event", event_path, method: :delete, class: "btn btn-danger" %>
          <% elsif current_user.attends? @event %>
            <%= link_to "Join event", join_event_path, class: "btn btn-outline-success disabled" %>
            <%= link_to "Leave event", leave_event_path, class: "btn btn-danger" %>
          <% else %>
            <%= link_to "Join event", join_event_path, class: "btn btn-success" %>
            <%= link_to "Leave event", leave_event_path, class: "btn btn-outline-danger disabled" %>
          <% end %>
        </div>
      <% else %>
        <p>
          <%= link_to "Sign up", new_user_registration_path %> or
          <%= link_to "Log in", new_user_session_path %> to join this event.
        </p>
      <% end %>
    </div>
  </div>

  <div class="col-lg-3">
    <% attendee_count = @event.attending_users.count %>
    <div class="h2">Attendees (<%= attendee_count %>)</div>
    <div>
      <ul>
        <% if attendee_count.zero? %>
          <li>No one is coming.</li>
        <% else %>
          <% @event.attending_users.each do |attendee| %>
            <li><%= link_to attendee.username, user_path(attendee) %></li>
          <% end %>
        <% end %>
      </ul>
    </div>
  </div>
</div>
